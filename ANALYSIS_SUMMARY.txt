================================================================================
                   ç¼–è¯‘å™¨å¤±è´¥æµ‹è¯•åˆ†æ - æ‰§è¡Œæ€»ç»“
================================================================================

åˆ†ææ—¥æœŸï¼š2025å¹´12æœˆ10æ—¥
åˆ†æå¯¹è±¡ï¼šTHSS-Assembly-and-Compilation-Principles-Final-Lab ç¼–è¯‘å™¨
å¤±è´¥æµ‹è¯•æ•°ï¼š7ä¸ªï¼ˆæ¶‰åŠ4ä¸ªæ ¹æœ¬é—®é¢˜ï¼‰

================================================================================
                            å…³é”®å‘ç°
================================================================================

å‘ç°çš„4ä¸ªæ ¹æœ¬é—®é¢˜ï¼š

ã€é—®é¢˜1ã€‘æ•°ç»„åˆå§‹åŒ–ä»£ç ç¼ºå¤± âš ï¸ æœ€é«˜ä¼˜å…ˆçº§
  - å—å½±å“çš„æµ‹è¯•ï¼š04_arr_defn3, 05_arr_defn4, 54_hidden_var
  - ä¸¥é‡ç¨‹åº¦ï¼šğŸ”´ é«˜ - å½±å“æ‰€æœ‰æ•°ç»„åˆå§‹åŒ–
  - ä¿®å¤æ—¶é—´ï¼š1-2å¤©
  - æ ¹æœ¬åŸå› ï¼šinitializeArray() å‡½æ•°å­˜åœ¨ä½†ä»æœªè¢«è°ƒç”¨

ã€é—®é¢˜2ã€‘çŸ­è·¯æ±‚å€¼æœªå®ç° âš ï¸ æœ€å›°éš¾é—®é¢˜
  - å—å½±å“çš„æµ‹è¯•ï¼š50_short_circuit, 51_short_circuit3
  - ä¸¥é‡ç¨‹åº¦ï¼šğŸ”´ é«˜ - å‡½æ•°è°ƒç”¨å‰¯ä½œç”¨ä¸æ­£ç¡®
  - ä¿®å¤æ—¶é—´ï¼š3-5å¤©
  - æ ¹æœ¬åŸå› ï¼šä½¿ç”¨ç®€å•æŒ‰ä½ä¸/æˆ–è€Œä¸æ˜¯æ¡ä»¶åˆ†æ”¯

ã€é—®é¢˜3ã€‘å¤æ‚è¡¨è¾¾å¼å¤„ç†é”™è¯¯ âš ï¸ æœ€å®¹æ˜“ä¿®å¤
  - å—å½±å“çš„æµ‹è¯•ï¼š48_assign_complex_expr, 49_if_complex_expr
  - ä¸¥é‡ç¨‹åº¦ï¼šğŸŸ¡ ä¸­ - æŸäº›è®¡ç®—è¢«ä¸¢å¼ƒ
  - ä¿®å¤æ—¶é—´ï¼š1å¤©
  - æ ¹æœ¬åŸå› ï¼šè¡¨è¾¾å¼æ ‘éå†æ—¶ä¸­é—´å€¼è¿½è¸ªå¤±è´¥

ã€é—®é¢˜4ã€‘å…¨å±€æ•°ç»„åˆå§‹åŒ–ç¼ºå¤±
  - å—å½±å“çš„æµ‹è¯•ï¼š54_hidden_varï¼ˆåŒé—®é¢˜1ï¼‰
  - ä¸¥é‡ç¨‹åº¦ï¼šğŸŸ¡ ä¸­ - å…¨å±€æ•°ç»„æ— åˆå€¼
  - ä¿®å¤æ—¶é—´ï¼š0.5å¤©ï¼ˆä¸é—®é¢˜1ä¸€èµ·ï¼‰
  - æ ¹æœ¬åŸå› ï¼šå…¨å±€å£°æ˜æ—¶ç¼ºå°‘åˆå§‹åŒ–åˆ—è¡¨å¤„ç†

================================================================================
                        ä¿®å¤ä¼˜å…ˆçº§å’Œæ—¶é—´è¡¨
================================================================================

æ¨èä¿®å¤é¡ºåºï¼š

ğŸ¥‡ ç¬¬ä¸€é˜¶æ®µï¼ˆé—®é¢˜3ï¼‰- 1å¤©
  â”œâ”€ è¡¨è¾¾å¼å€¼ä¸¢å¤±
  â”œâ”€ æœ€ç®€å•ï¼Œæœ€å¿«è§æ•ˆ
  â””â”€ ä¿®å¤åå¯è¿‡ï¼š48_assign_complex_expr, 49_if_complex_expr

ğŸ¥ˆ ç¬¬äºŒé˜¶æ®µï¼ˆé—®é¢˜1+4ï¼‰- 1-2å¤©
  â”œâ”€ æ•°ç»„åˆå§‹åŒ–ï¼ˆå±€éƒ¨+å…¨å±€ï¼‰
  â”œâ”€ å½±å“é¢å¹¿ï¼Œä¿®å¤åå¢åˆ†æœ€å¤š
  â””â”€ ä¿®å¤åå¯è¿‡ï¼š04_arr_defn3, 05_arr_defn4, 54_hidden_var

ğŸ¥‰ ç¬¬ä¸‰é˜¶æ®µï¼ˆé—®é¢˜2ï¼‰- 3-5å¤©
  â”œâ”€ çŸ­è·¯æ±‚å€¼
  â”œâ”€ æœ€å¤æ‚ï¼Œéœ€è¦é‡æ„æ§åˆ¶æµ
  â””â”€ ä¿®å¤åå¯è¿‡ï¼š50_short_circuit, 51_short_circuit3

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»ä¿®å¤æ—¶é—´ï¼š5-8å¤©

================================================================================
                          ä»£ç å½±å“ä½ç½®
================================================================================

ä¸»è¦ä¿®æ”¹æ–‡ä»¶ï¼šinclude/CodeGenVisitor.h (1353 è¡Œ)

é—®é¢˜1ï¼ˆæ•°ç»„åˆå§‹åŒ–ï¼‰ï¼š
  - visitVarDef() - ç¬¬150-210è¡Œ
  - initializeArray() - ç¬¬210-270è¡Œ
  - ä¿®æ”¹å†…å®¹ï¼šæ·»åŠ åˆå§‹åŒ–è°ƒç”¨ï¼Œå¤„ç†å¹³å¦/åµŒå¥—/æ··åˆåˆå§‹åŒ–

é—®é¢˜2ï¼ˆçŸ­è·¯æ±‚å€¼ï¼‰ï¼š
  - visitLandExp() - ç¬¬1174è¡Œ
  - visitLorExp() - ç¬¬1223è¡Œ
  - ä¿®æ”¹å†…å®¹ï¼šç”Ÿæˆæ¡ä»¶åˆ†æ”¯å’ŒPHIèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¸/æˆ–

é—®é¢˜3ï¼ˆè¡¨è¾¾å¼å¤„ç†ï¼‰ï¼š
  - visitMulExp() - ç¬¬1100è¡Œ
  - visitAddExp() - ç¬¬1140è¡Œ
  - ä¿®æ”¹å†…å®¹ï¼šç¡®ä¿æ‰€æœ‰ä¸­é—´å€¼è¢«æ­£ç¡®ä½¿ç”¨

é—®é¢˜4ï¼ˆå…¨å±€æ•°ç»„åˆå§‹åŒ–ï¼‰ï¼š
  - visitConstDecl() - ç¬¬280-350è¡Œ
  - ä¿®æ”¹å†…å®¹ï¼šå¤„ç†å…¨å±€æ•°ç»„åˆå§‹å€¼åˆ—è¡¨

================================================================================
                          æµ‹è¯•è¦†ç›–æƒ…å†µ
================================================================================

å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹åˆ†å¸ƒï¼š

æ•°ç»„åˆå§‹åŒ–ç›¸å…³ï¼š
  âœ— 04_arr_defn3 - å¤šç»´æ•°ç»„çš„å„ç§åˆå§‹åŒ–æ–¹å¼
  âœ— 05_arr_defn4 - æ•°ç»„åˆå§‹åŒ–çš„æ‰©å±•
  âœ— 54_hidden_var - ä½œç”¨åŸŸé—®é¢˜ + æ•°ç»„åˆå§‹åŒ–

çŸ­è·¯æ±‚å€¼ç›¸å…³ï¼š
  âœ— 50_short_circuit - åŸºæœ¬çŸ­è·¯æ±‚å€¼
  âœ— 51_short_circuit3 - å¤æ‚çŸ­è·¯æ±‚å€¼

è¡¨è¾¾å¼å¤„ç†ç›¸å…³ï¼š
  âœ— 48_assign_complex_expr - å¤æ‚èµ‹å€¼è¡¨è¾¾å¼
  âœ— 49_if_complex_expr - æ¡ä»¶ä¸­çš„å¤æ‚è¡¨è¾¾å¼

ä¿®å¤åé¢„æœŸå…¨éƒ¨é€šè¿‡ã€‚

================================================================================
                         è¯¦ç»†åˆ†ææ–‡æ¡£
================================================================================

å·²ç”Ÿæˆ4ä¸ªè¯¦ç»†åˆ†ææ–‡æ¡£ï¼š

1. TEST_ANALYSIS.md (14KB)
   - 4ä¸ªé—®é¢˜çš„å®Œæ•´åˆ†æ
   - åŒ…å«æºä»£ç ã€æœŸæœ›è¾“å‡ºã€å®é™…é—®é¢˜ã€æ ¹æœ¬åŸå› 
   - å½±å“èŒƒå›´è¯„ä¼°å’Œä¿®å¤éš¾åº¦æ’åº

2. QUICK_REFERENCE.md (3KB)
   - é—®é¢˜é€ŸæŸ¥è¡¨
   - ä¸€é¡µçº¸å¿«é€Ÿå‚è€ƒ
   - æ‰“å°å‡ºæ¥åœ¨deskä¸Šä½¿ç”¨

3. TECHNICAL_DEEP_DIVE.md (14KB)
   - ä»£ç çº§æŠ€æœ¯åˆ†æ
   - æ­£ç¡®å®ç°ç¤ºä¾‹
   - å…³é”®å‡½æ•°å·¥ä½œåŸç†

4. FIXING_CHECKLIST.md (11KB)
   - 3ä¸ªä¿®å¤é˜¶æ®µçš„è¯¦ç»†æ­¥éª¤
   - å¯æ‰“å‹¾çš„ä»»åŠ¡æ¸…å•
   - ç¼–è¯‘æµ‹è¯•å‘½ä»¤å’Œè°ƒè¯•æŠ€å·§

================================================================================
                          å¿«é€Ÿè¯Šæ–­å‘½ä»¤
================================================================================

æŸ¥çœ‹æ‰€æœ‰å¤±è´¥çš„æµ‹è¯•ï¼š
  $ python3 run-test.py 2>&1 | grep -E "Failed|Passed"

ç¼–è¯‘å¹¶æµ‹è¯•å•ä¸ªæ–‡ä»¶ï¼š
  $ ./build/compiler test/resources/functional/XX_test.sy -o /tmp/out.ll
  $ llvm-as /tmp/out.ll -o /tmp/out.bc
  $ lli /tmp/out.bc < test/resources/functional/XX_test.in

ç”Ÿæˆçš„LLVMä»£ç æ£€æŸ¥ï¼š
  $ cat /tmp/out.ll | grep -E "store|call|br|phi"

================================================================================
                          å…³é”®æ•°æ®
================================================================================

ç¼–è¯‘å™¨è§„æ¨¡ï¼š
  - ä¸»æºæ–‡ä»¶ï¼šCodeGenVisitor.h (1353 è¡Œ)
  - è¾…åŠ©æ–‡ä»¶ï¼šIRBuilder.h, SymbolTable.h, Type.h
  - æ€»æµ‹è¯•ç”¨ä¾‹ï¼š60+ä¸ª
  - å½“å‰é€šè¿‡ç‡ï¼šçº¦88%ï¼ˆ53ä¸ªé€šè¿‡ï¼Œ7ä¸ªå¤±è´¥ï¼‰

å¤±è´¥åŸå› ç»Ÿè®¡ï¼š
  - æ•°ç»„åˆå§‹åŒ–ç¼ºå¤±ï¼š3ä¸ªæµ‹è¯•
  - çŸ­è·¯æ±‚å€¼é”™è¯¯ï¼š2ä¸ªæµ‹è¯•
  - è¡¨è¾¾å¼å¤„ç†ï¼š2ä¸ªæµ‹è¯•

ä»£ç å¤æ‚åº¦ï¼š
  - é—®é¢˜1ï¼šä¸­ç­‰ï¼ˆé€»è¾‘ç›¸å¯¹æ¸…æ™°ï¼Œä½†è°ƒç”¨é“¾ç¼ºå¤±ï¼‰
  - é—®é¢˜2ï¼šé«˜ï¼ˆéœ€è¦æ§åˆ¶æµé‡æ„ï¼Œæ¶‰åŠå¤šä¸ªåŸºæœ¬å—ï¼‰
  - é—®é¢˜3ï¼šä½ï¼ˆå¯èƒ½æ˜¯ç®€å•çš„å€¼è¿½è¸ªé—®é¢˜ï¼‰
  - é—®é¢˜4ï¼šä½ï¼ˆä¸é—®é¢˜1ä½¿ç”¨ç›¸åŒæœºåˆ¶ï¼‰

================================================================================
                          é£é™©è¯„ä¼°
================================================================================

ä¿®å¤é£é™©ç­‰çº§ï¼š

ä½é£é™©ï¼ˆå®¹æ˜“ + å¯æ§ï¼‰ï¼š
  âœ“ é—®é¢˜3ï¼ˆè¡¨è¾¾å¼å¤„ç†ï¼‰
  âœ“ é—®é¢˜4ï¼ˆå…¨å±€åˆå§‹åŒ–ï¼‰- ä¸1ä¸€èµ·ä¿®å¤

ä¸­ç­‰é£é™©ï¼ˆéœ€è¦å°å¿ƒï¼‰ï¼š
  âš  é—®é¢˜1ï¼ˆæ•°ç»„åˆå§‹åŒ–ï¼‰- æ¶‰åŠå¤šå¤„è°ƒç”¨ç‚¹ï¼Œéœ€è¦å…¨é¢æµ‹è¯•

é«˜é£é™©ï¼ˆéœ€è¦è°¨æ…å’Œå……åˆ†æµ‹è¯•ï¼‰ï¼š
  âš âš  é—®é¢˜2ï¼ˆçŸ­è·¯æ±‚å€¼ï¼‰- æ”¹å˜æ§åˆ¶æµï¼Œå¯èƒ½å½±å“å…¶ä»–æ¡ä»¶é€»è¾‘

é£é™©ç¼“è§£å»ºè®®ï¼š
  1. æ¯æ¬¡ä¿®å¤ä¸€ä¸ªé—®é¢˜ï¼Œç«‹å³æµ‹è¯•
  2. ä½¿ç”¨gitä¿å­˜ä¿®å¤å‰çš„çŠ¶æ€ï¼Œä¾¿äºå›æ»š
  3. ä¿®å¤åè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆ60+æµ‹è¯•ï¼‰
  4. ä½¿ç”¨è°ƒè¯•è¾“å‡ºè¿½è¸ªä»£ç æ‰§è¡Œæµ
  5. å‚è€ƒFIXING_CHECKLIST.mdä¸­çš„éªŒè¯æ­¥éª¤

================================================================================
                          æˆåŠŸæ ‡å¿—
================================================================================

ä¿®å¤å®Œæˆçš„æ ‡å¿—ï¼š

â–¡ æ‰€æœ‰7ä¸ªå¤±è´¥çš„æµ‹è¯•éƒ½é€šè¿‡
â–¡ å…¨éƒ¨60+ä¸ªæµ‹è¯•éƒ½é€šè¿‡
â–¡ æ²¡æœ‰æ–°å¢çš„å¤±è´¥æµ‹è¯•ï¼ˆæ— å›å½’ï¼‰
â–¡ ç”Ÿæˆçš„LLVMä»£ç ä¸é¢„æœŸå‚è€ƒä»£ç ä¸€è‡´
â–¡ åŠŸèƒ½æµ‹è¯•è¾“å‡ºä¸æœŸæœ›è¾“å‡ºå®Œå…¨åŒ¹é…

éªŒè¯å‘½ä»¤ï¼š
  $ python3 run-test.py

é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼ˆç›¸å…³éƒ¨åˆ†ï¼‰ï¼š
  [INFO] 04_arr_defn3             : âœ“ Passed
  [INFO] 05_arr_defn4             : âœ“ Passed
  [INFO] 48_assign_complex_expr   : âœ“ Passed
  [INFO] 49_if_complex_expr       : âœ“ Passed
  [INFO] 50_short_circuit         : âœ“ Passed
  [INFO] 51_short_circuit3        : âœ“ Passed
  [INFO] 54_hidden_var            : âœ“ Passed

================================================================================
                          æ¨èåç»­æ­¥éª¤
================================================================================

1. é˜…è¯»æœ¬æ€»ç»“ï¼ˆ5åˆ†é’Ÿï¼‰âœ“
2. é˜…è¯»TEST_ANALYSIS.mdäº†è§£é—®é¢˜ï¼ˆ20åˆ†é’Ÿï¼‰
3. æŒ‰ä¼˜å…ˆçº§é€‰æ‹©é—®é¢˜1ã€2ã€3å¼€å§‹ä¿®å¤
4. é’ˆå¯¹æ¯ä¸ªé—®é¢˜ï¼š
   a. å‚è€ƒTECHNICAL_DEEP_DIVE.mdç†è§£ç»†èŠ‚ï¼ˆ20åˆ†é’Ÿï¼‰
   b. å‚è€ƒFIXING_CHECKLIST.mdæ‰§è¡Œä¿®å¤ï¼ˆæŒ‰æ­¥éª¤ï¼‰
   c. ç¼–è¯‘ã€æµ‹è¯•ã€è°ƒè¯•ï¼ˆ30åˆ†é’Ÿ - 2å°æ—¶ï¼‰
   d. ç¡®è®¤ä¿®å¤æˆåŠŸå¹¶è¿è¡Œå›å½’æµ‹è¯•ï¼ˆ15åˆ†é’Ÿï¼‰
5. é‡å¤ç¬¬4æ­¥ç›´åˆ°æ‰€æœ‰é—®é¢˜éƒ½ä¿®å¤

æ€»é¢„è®¡æ—¶é—´ï¼š5-8å¤©å¼€å‘æ—¶é—´

================================================================================
                          æ–‡æ¡£ä½¿ç”¨æŒ‡å—
================================================================================

å„æ–‡æ¡£çš„æ¨èç”¨é€”ï¼š

README_ANALYSIS.md (æ­¤æ–‡ä»¶)
  â†’ å¿«é€Ÿäº†è§£æ•´ä½“æƒ…å†µ
  â†’ ä½œä¸ºæ‰€æœ‰æ–‡æ¡£çš„å¯¼èˆª

TEST_ANALYSIS.md
  â†’ æ·±å…¥ç†è§£æ¯ä¸ªé—®é¢˜çš„ç»†èŠ‚
  â†’ äº†è§£é—®é¢˜çš„å½±å“èŒƒå›´

QUICK_REFERENCE.md
  â†’ å¿«é€ŸæŸ¥æ‰¾é—®é¢˜ä¿¡æ¯
  â†’ æ‰“å°å‡ºæ¥åœ¨å·¥ä½œåŒºæ”¾ç½®

TECHNICAL_DEEP_DIVE.md
  â†’ ä¿®å¤å‰é˜…è¯»ç†è§£å®ç°åŸç†
  â†’ æŸ¥æ‰¾ä»£ç ç¤ºä¾‹å’Œä¿®å¤æ–¹æ¡ˆ

FIXING_CHECKLIST.md
  â†’ ä¿®å¤æœŸé—´çš„ä¸»è¦å‚è€ƒ
  â†’ é€æ­¥æ‰§è¡Œä»»åŠ¡å’ŒéªŒè¯

================================================================================

åˆ†æå®Œæˆã€‚æ‰€æœ‰ä¿¡æ¯å·²åœ¨è¯¦ç»†æ–‡æ¡£ä¸­æä¾›ã€‚
å»ºè®®ä»TEST_ANALYSIS.mdå¼€å§‹é˜…è¯»è·å¾—å®Œæ•´ç†è§£ã€‚

================================================================================
